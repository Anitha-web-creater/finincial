<section class="form">
  <h2>Add Investment</h2>
  <form [formGroup]="form" (ngSubmit)="submit()" *ngIf="!reviewMode" novalidate>
    <label>
      Name
      <input formControlName="name">
      <span class="error" *ngIf="form.get('name')?.touched && form.get('name')?.invalid">Required (min 2)</span>
    </label>

    <label>
      Type
      <select formControlName="type">
        <option>Stock</option>
        <option>Bond</option>
        <option>ETF</option>
      </select>
    </label>

    <label>
      Quantity
      <input type="number" formControlName="quantity">
      <span class="error" *ngIf="form.get('quantity')?.touched && form.get('quantity')?.invalid">Min 1</span>
    </label>

    <label>
      Purchase Price
      <input type="number" step="0.01" formControlName="purchasePrice">
      <span class="error" *ngIf="form.get('purchasePrice')?.touched && form.get('purchasePrice')?.invalid">Must be > 0</span>
    </label>

    <label>
      Purchase Date
      <input type="date" formControlName="purchaseDate">
      <span class="error" *ngIf="form.get('purchaseDate')?.touched && form.get('purchaseDate')?.invalid">Required</span>
    </label>

    <button type="submit">Review</button>
  </form>

  <div *ngIf="reviewMode" class="review">
    <h3>Review before Submit</h3>
    <pre>{{ form.value | json }}</pre>
    <button (click)="confirm()">Confirm & Save</button>
    <button (click)="reviewMode=false">Back</button>
  </div>
</section>
